<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="test.spring.mapper.kim.UserIp">
	
	<select id = "reco_place_user_main" resultType="test.spring.component.kim.kimDTO">
    	select name, adress, phonnum, time, lat, lon from ${table} where lat between #{minLat} and #{maxLat} and lon between #{minLon} and #{maxLon}
	</select>

	<select id = "reco_place_user_sub" resultType="test.spring.component.kim.kimDTO">
    	select name, adress, phonnum, time, lat, lon from ${table} where lat between #{minLat} and #{maxLat} and lon between #{minLon} and #{maxLon}
	</select>

	<update id="set_reward">
    	UPDATE kakao_table SET cash = cash + 100 WHERE k_email = #{memId}
	</update>
    
	<select id="count_reward"  resultType ="int">
    	select count (*) from reward_test where (lat between #{minLat} and #{maxLat}) and (lon between #{minLon} and #{maxLon})
	</select>
	
	<select id="getCash" resultType ="int">
		select cash from kakao_table where k_email = #{id}
	</select>
	
	<select id = "getgoods" resultType = "test.spring.component.kim.Reward_GoodsDTO">
		select name, imageUrl, points FROM reward_Goods
	</select>
	
	<update id="sub_point">
    	UPDATE kakao_table SET cash = cash - #{points} WHERE k_email = #{memId}
	</update>
	
	<insert id="add_goods">
    	INSERT INTO reward_shop (id, k_email, address, goods) VALUES (idseq.nextval, #{memId}, #{address}, #{goodsId})
	</insert>
	
	<select id="admin_reward" resultType ="test.spring.component.kim.Admin_reward">
		select * from reward_shop 
	</select>
	
	<update id="status_update">
		update reward_shop set status = #{status} where id=#{id}
	</update>
	
	<select id="list_schedule" resultType ="test.spring.component.kim.Schedule">
		SELECT * FROM user_tour_info where id = #{memId};
	</select>

</mapper>